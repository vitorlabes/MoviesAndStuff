@use 'variables' as *;
@use 'mixins' as *;

.star-rating-container {
  display: flex;
  align-items: center;
  gap: $spacing-md;
  padding: $spacing-sm 0;
}

.stars-wrapper {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.star-button {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  transition: $transition-fast;
  display: flex;
  align-items: center;
  justify-content: center;

  &:focus {
    outline: none;
  }

  &:focus-visible {
    .star-icon {
      @include icon-glow-strong;
    }
  }

  &.disabled {
    cursor: not-allowed;
    opacity: 0.6;
  }

  &:not(.disabled):hover {
    transform: scale(1.15);
  }

  &:not(.disabled):active {
    transform: scale(0.95);
  }
}

.star-icon {
  width: 32px;
  height: 32px;
  transition: $transition-fast;
  fill: rgba(98, 58, 149, 0.15);
  stroke: $border-base-color;
  stroke-width: 1.5;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));

  // Hover state
  .star-button:not(.disabled):hover & {
    stroke: $border-hover-color;
    fill: rgba(98, 58, 149, 0.25);
  }

  // Half filled state
  .star-button.half-filled & {
    fill: url(#half-fill-1);
    stroke: $purple-lighter;
    stroke-width: 1;
    filter: drop-shadow(0 0 6px rgba(147, 107, 192, 0.5)) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  }

  .star-button.half-filled:not(.disabled):hover & {
    filter: drop-shadow(0 0 10px rgba(147, 107, 192, 0.7)) drop-shadow(0 2px 6px rgba(0, 0, 0, 0.4));
  }

  // Filled state
  .star-button.filled & {
    fill: $purple-primary;
    stroke: $purple-lighter;
    stroke-width: 1;
    filter: drop-shadow(0 0 8px rgba(147, 107, 192, 0.6)) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  }

  .star-button.filled:not(.disabled):hover & {
    fill: $purple-lighter;
    stroke: #D4C5F0;
    filter: drop-shadow(0 0 12px rgba(147, 107, 192, 0.8)) drop-shadow(0 2px 6px rgba(0, 0, 0, 0.4));
    transform: scale(1.05);
  }
}

.rating-display {
  color: $text-primary;
  font-weight: $font-weight-medium;
  font-size: $font-size-base;
  min-width: 3.5rem;
  text-align: center;
  padding: 0.25rem 0.75rem;
  background: $gradient-base;
  border: $border-base;
  border-radius: $border-radius-md;
  box-shadow: $shadow-inset;
  letter-spacing: $letter-spacing-md;
}

// Responsive
@include tablet {
  .star-icon {
    width: 28px;
    height: 28px;
  }

  .stars-wrapper {
    gap: 0.2rem;
  }
}

@include mobile {
  .star-rating-container {
    flex-direction: column;
    align-items: flex-start;
    gap: $spacing-sm;
  }

  .star-icon {
    width: 30px;
    height: 30px;
  }
}