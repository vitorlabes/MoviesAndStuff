<div class="star-rating-container" (mouseleave)="onMouseLeave()">
  <div class="stars-wrapper">
    @for (star of stars; track star) {
    <button type="button" class="star-button" [class.filled]="getStarFillPercentage(star) === 'full'"
      [class.half-filled]="getStarFillPercentage(star) === 'half'" [class.disabled]="disabled"
      (click)="onStarClick(star, $event)" (mousemove)="onStarHover(star, $event)"
      [attr.aria-label]="'Rate ' + star + ' out of ' + maxStars">
      <svg class="star-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient [id]="'half-fill-' + star">
            <stop offset="50%" stop-color="#936BC0" />
            <stop offset="50%" stop-color="rgba(98, 58, 149, 0.15)" />
          </linearGradient>
        </defs>
        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
      </svg>
    </button>
    }
  </div>
  <div class="rating-display">
    {{ rating() || 0 }}/{{ maxStars }}
  </div>
</div>